---
layout: post
title: "What's so interesting in a camel standing up?"
date: 2014-04-30
---

*This project tries to solve a variant of what is called as the rising camel problem mentioned in [1]. This consists of two parts:*
<ol>
<li>Modeling and trajectory tracking (kinematic) by determining pose of the robot by performing the inverse kinematic analysis of the quadruped robot.</li>
<li>To solve the energy optimal control problem of such a quadruped, and to hope that it resembles an animals motion!</li>
</ol>

To solve the first problem it is assumed that the robot is in its quadruple stance phase i.e. all the four legs of the quadruped are touching the fIoor and the point of contacts of the legs with the ground do not change with time. Also assuming that there is sufficient friction to prevent the legs from slipping during motion. In such a condition the robot can be modeled as a parallel manipulator for analysis.
The model of the robot being considered is as in [2] and is reproduced below.

![Kinematic Diagram](/images/post1/Kine_diag.jpg#center)


The inverse kinematic analysis was performed and was used to determine the pose of the robot as its eyes (Imaginary. Assumed to be on the mid point of the front side of the body) track a circle. The result is as shown below.

<p align="center">
[![Quadruped\_IK](http://img.youtube.com/vi/FnNcy5_oiPs/0.jpg)](http://www.youtube.com/watch?v=FnNcy5_oiPs "Inverse Kinematics of a Quadruped Robot")
</p>

The second problem was solved considering only one half of the symmetric body of the quadruped and the case for optimization was to rise from its sitting pose to a standing pose assuming a planar motion under the effects of gravity.

Assumptions involved in solving this problem are that:

   1. The solutions of the joint angle trajectories were approximated using fourth order polynomials.
   2. The integration over the entire interval was approximated using Gausssian Quadratures instead of performing the actual integration over the whole time period of motion owing to complicated dynamics of the parallel manipulator.

These helped in solving the problem in a practical time spans on a typical laptop and allowed us to iterate quickly. The problem was solved under various parametric conditions to investigate the characteristics of the obtained controllers. The following section contains a discussion on all the cases and the corresponding results. [1] mentions the problem of two serial manipulators cooperating in lifting a workpiece together as the rising camel problem. But here see it from a different perspective and are modeling a camels body itself to see the motions generated by the optimal controller.

### Simple shooting:
As the first step we tried solving the complete control problem. The dynamics turned out to be too complex to integrate for the whole time period. So to start with a simpler problem, ignoring the effects of gravity. And also a feedback linearized model was considered to solve the energy optimal problem. The solution to this problem is a shown in the video below. It can be seen that the presense of the third actuator in an asymmetric position did not effect the solution at all. The complete motion was symmetric throughout the motion. This means that such a model is decoupled, as the complex coupling terms are missing. Hence this gives us some interesting yet incomplete results.

<p align="center">
[![Simple\_Shooting](http://img.youtube.com/vi/FnNcy5_oiPs/0.jpg)](http://www.youtube.com/watch?v=FnNcy5_oiPs "Simple Shooting")
</p>

### Without Gravity:
To solve the full problem instead of searching the full space we'll instead start approximating the trajectory with atleast a polynomial of fourth order(as we know the end configurations of each state to be controlled) and use a Gaussian integration to integrate within the given time interval. This allowed us to practically solve the problem. 

#### Experiment: 
The same construction of the manipulator as shown above was considered and the problem of raising to a final state was done without considering the effects of the gravity first. The tests were performed parametrically by changing the number of Gauss Quadrature sampling points. The following are the results obtained. The results obtained were different from the one obtained from decoupleing the problem. This confirms the fact that the problem cannot be solved by using simple feedback linearization technique. This decouples the problem loosing valuable trajectories which might exploit the coupled effects in the dynamics.

<p align="center">
[![Without Gravity](http://img.youtube.com/vi/ZnqzUKwgiDI/0.jpg)](http://www.youtube.com/watch?v=ZnqzUKwgiDI "Without Gravity Simulation")
</p>

### With Gravity:
This deals with the raising camel problem in its full glory. This problem is same as the above but considering the effects of gravity in this case. The test was performed with changing Gauss Quadrature sampling number. The result is as shown. One can see a striking similarity between the optimal solution between this and the camel rising. Though both of these models differ in terms of construction, i.e. the number of degrees of freedom and the number of links (bones involved) and the type of actuation itself, the solution can be seen very relevant and a similar motion can be observed in the simulated scenario and the real camel motion.

## VIDEO

### Unrealistic Mass Experiment:
 The body link was given a very high mass to see if it could come up with a control strategy to reach the final pose. The following is the result. The result gives us some interesting insights into how the task was solved.

The inspiration for this experiment is [1], speaking about power lifiting of a load more than the prescribed value by a PUMA robot. We wanted to see if we can observe such joint trajectories to lift a very high body mass.

<p align="center">
[![High Mass Simulation](http://img.youtube.com/vi/1yM5EPx0N3g/0.jpg)](http://www.youtube.com/watch?v=1yM5EPx0N3g "High Mass Simulation")
</p>

Interpretation:
Initially instead of lifting the link to the final state it lets gravity do the job for it. While transitioning from moving downward to upward it makes sure that the left part of the linkages are aligned such that the load is completely taken by the ground joint so that there is no additional effort by the motors in lifting it up. Before raising itself up, it moves almost in a straight line path, which implies that there is no change in its potential energy throughout that motion.

The manipulator was enforced to reach a ﬁnal end state, so the ﬁnal total energy is the potential energy of all the links only. Since the net energy is the only energy being pumped by the motors, the interest of the motors is to take the body link to the top and hence the energy pumped into the system shouldnt be wasted as potential energy of the system. So the manipulator tries to maintain the body in the horizontal position i.e. no energy is used in changing the  potential energy of the links, but all the energy pumped in is the kinetic energy of the high massed link. Thus once the transmission angle is optimal the other actuator simply goes to full actuation pushing the link to the ﬁnal state. This explains that horizontal path.

The key difference between the rising camel problem talked about in [1] vs here is that the contact force between the serial manipulator and the workpiece might be limited, but these ideal passive joints allow theoretically infinite forces. Also it is clearly observed that through a large part of the trajectory the manipulator prefers a singular pose, at which some of the load of the link is taken by the structure itself rather than the actuators working against them and spending energy.

The project was done along with my colleague R. Gautham for the course "Design, Analysis and Control of Parallel Manipulators", instructor, Prof. Sandipan Bandyopadhyay. For further information please find the complete project report here. 

[Rising Camel Project Report]({{ site.url }}/pdfs/rising_camel.pdf)

<br>

## **References**:
1. J. E. Bobrow et. al., "Optimal Robot Motions for Physical Criteria", Journ. of Robotic Systems, 2001
2. Jingjun YU, et.al., ”Motion capability analysis of a quadruped robot as a parallel manipulator”, Front. Mech. Eng., 2014
